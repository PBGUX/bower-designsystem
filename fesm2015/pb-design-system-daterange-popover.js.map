{"version":3,"file":"pb-design-system-daterange-popover.js","sources":["../../../projects/pb-design-system/daterange-popover/daterange-popover.service.ts","../../../projects/pb-design-system/daterange-popover/daterange-popover.component.ts","../../../projects/pb-design-system/daterange-popover/daterange-popover.module.ts","../../../projects/pb-design-system/daterange-popover/pb-design-system-daterange-popover.ts"],"sourcesContent":["import { Injectable, Inject, LOCALE_ID } from '@angular/core';\nimport { registerLocaleData } from '@angular/common';\n\nimport { PbdsDaterangeLocale } from './daterange-popover.interfaces';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class PbdsDaterangeService {\n  private locale = this.localeId.toLowerCase();\n\n  constructor(@Inject(LOCALE_ID) private localeId: string) {}\n\n  setLocale(locale: PbdsDaterangeLocale) {\n    this.locale = `${locale.language}-${locale.country}`.toLowerCase();\n\n    // set the angular LOCALE_ID dynamically for ng-bootstrap datepicker\n    registerLocaleData(locale.locale, this.locale);\n  }\n\n  getCurrentLocale() {\n    return this.locale;\n  }\n}\n","import {\n  Component,\n  Injectable,\n  OnInit,\n  ViewChild,\n  Input,\n  Output,\n  EventEmitter,\n  OnChanges,\n  SimpleChanges\n} from '@angular/core';\n\nimport {\n  getLocaleDayNames,\n  getLocaleMonthNames,\n  getLocaleFirstDayOfWeek,\n  FormStyle,\n  TranslationWidth,\n  getLocaleDateFormat,\n  FormatWidth,\n  formatDate\n} from '@angular/common';\n\nimport { NgbPopover, NgbDate, NgbCalendar, NgbDatepickerI18n, NgbDateStruct } from '@ng-bootstrap/ng-bootstrap';\n\nimport { PbdsDaterangePreset, PbdsDaterangeFilter, PbdsDaterangeChange } from './daterange-popover.interfaces';\nimport { PbdsDaterangeService } from './daterange-popover.service';\n\n// Define custom service providing the months and weekdays translations\n@Injectable()\nexport class CustomDatepickerI18n extends NgbDatepickerI18n {\n  constructor(public daterangeService: PbdsDaterangeService) {\n    super();\n  }\n\n  getWeekdayShortName(weekday: number): string {\n    // for ng-bootstrap, sunday number of 7 converted to 0\n    weekday = weekday === 7 ? 0 : weekday;\n\n    // console.log(\n    //   'weekday: ',\n    //   this.daterangeService.getCurrentLocale(),\n    //   weekday,\n    //   getLocaleDayNames(this.daterangeService.getCurrentLocale(), FormStyle.Standalone, TranslationWidth.Abbreviated)[weekday]\n    // );\n\n    return getLocaleDayNames(\n      this.daterangeService.getCurrentLocale(),\n      FormStyle.Standalone,\n      TranslationWidth.Abbreviated\n    )[weekday];\n  }\n\n  getMonthShortName(month: number): string {\n    return getLocaleMonthNames(this.daterangeService.getCurrentLocale(), FormStyle.Standalone, TranslationWidth.Wide)[\n      month - 1\n    ];\n  }\n\n  getMonthFullName(month: number): string {\n    return getLocaleMonthNames(this.daterangeService.getCurrentLocale(), FormStyle.Standalone, TranslationWidth.Wide)[\n      month - 1\n    ];\n  }\n\n  getDayAriaLabel(date: NgbDateStruct): string {\n    return `${date.day}-${date.month}-${date.year}`;\n  }\n}\n\n@Component({\n  selector: 'pbds-daterange-popover',\n  templateUrl: './daterange-popover.component.html',\n  providers: [{ provide: NgbDatepickerI18n, useClass: CustomDatepickerI18n }],\n  styles: []\n})\nexport class PbdsDaterangePopoverComponent implements OnInit, OnChanges {\n  @ViewChild('datepickerPopup', { static: true }) private datepickerPopup: NgbPopover;\n\n  @Input()\n  presets: Array<PbdsDaterangePreset> = [\n    {\n      label: 'All Dates',\n      value: null\n    },\n    {\n      label: 'Last 7 Days',\n      value: 7\n    },\n    {\n      label: 'Last 30 Days',\n      value: 30\n    },\n    {\n      label: 'Year to Date',\n      value: 365\n    }\n  ];\n\n  @Input()\n  presetSelected: number | null | 'custom' = null;\n\n  @Input()\n  filters: Array<PbdsDaterangeFilter>;\n\n  @Input()\n  filterSelected = 0;\n\n  @Input()\n  showCustomPreset = true;\n\n  @Input()\n  applyText = 'Apply';\n\n  @Input()\n  cancelText = 'Cancel';\n\n  @Input()\n  customRangeText = 'Custom Range';\n\n  @Input()\n  minDate: NgbDate = this.calendar.getPrev(this.calendar.getToday(), 'y');\n\n  @Input()\n  maxDate: NgbDate = this.calendar.getToday();\n\n  @Input()\n  fromDate: NgbDate | null = null;\n\n  @Input()\n  toDate: NgbDate | null = null;\n\n  @Input()\n  inputFormat = '{fromDate} to {toDate}';\n\n  @Output()\n  private change: EventEmitter<PbdsDaterangeChange> = new EventEmitter<PbdsDaterangeChange>();\n\n  firstDayOfWeek = getLocaleFirstDayOfWeek(this.daterangeService.getCurrentLocale());\n\n  hoveredDate: NgbDate;\n\n  dateRange = '';\n  isDatepickerVisible = false;\n  selectedFilter;\n\n  constructor(private calendar: NgbCalendar, private daterangeService: PbdsDaterangeService) {}\n\n  ngOnInit() {\n    // china should start on a Monday, Angular locale returns incorrect 0\n    this.firstDayOfWeek =\n      this.daterangeService.getCurrentLocale() === 'zh-cn' ? this.firstDayOfWeek + 1 : this.firstDayOfWeek;\n\n    if (this.presetSelected === 'custom') {\n      this.showDatepicker();\n    }\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    if (changes.filters && this.filters) {\n      this.selectedFilter = this.filters[this.filterSelected];\n    }\n\n    if (changes.presets) {\n      if (!this.filters && this.presetSelected) {\n        this.presetClick(this.presets.find(p => p.value === this.presetSelected));\n      } else if (this.presetSelected) {\n        this.presetSelect({ value: this.presetSelected });\n        this.apply();\n      }\n    }\n\n    // if (changes.toText && changes.toText.firstChange === false) {\n    //   this.setInputLabel();\n    // }\n\n    this.setInputLabel();\n  }\n\n  apply() {\n    this.setInputLabel();\n    this.change.emit({\n      fromDate: this.fromDate,\n      toDate: this.toDate,\n      formattedDate: this.isDatepickerVisible ? this.dateFormat() : this.dateRange,\n      filter: this.filters ? this.selectedFilter.field : null,\n      value: this.presetSelected\n    });\n\n    this.datepickerPopup.close();\n  }\n\n  cancel() {\n    this.datepickerPopup.close();\n  }\n\n  onDateSelection(date: NgbDate) {\n    if (!this.fromDate && !this.toDate) {\n      this.fromDate = date;\n    } else if (this.fromDate && !this.toDate && date.after(this.fromDate)) {\n      this.toDate = date;\n    } else {\n      this.toDate = null;\n      this.fromDate = date;\n    }\n\n    // this.presetSelected = null;\n  }\n\n  presetSelect = $event => {\n    if ($event.value === 'custom') {\n      this.presetSelected = 'custom';\n      return false;\n    }\n\n    if ($event.value) {\n      this.toDate = this.calendar.getToday();\n      this.fromDate = this.calendar.getPrev(this.toDate, 'd', $event.value);\n      this.presetSelected = $event.value;\n    } else {\n      this.fromDate = null;\n      this.toDate = null;\n      this.presetSelected = null;\n    }\n\n    this.isDatepickerVisible = false;\n  };\n\n  presetClick(preset) {\n    // console.log('PRESET CLICK: ', preset);\n    if (preset) {\n      if (preset.value === 'custom') {\n        return false;\n      }\n\n      if (preset.value) {\n        this.toDate = this.calendar.getToday();\n        this.fromDate = this.calendar.getPrev(this.toDate, 'd', preset.value);\n        this.presetSelected = preset.value;\n      } else {\n        this.fromDate = null;\n        this.toDate = null;\n        this.presetSelected = null;\n      }\n\n      this.isDatepickerVisible = false;\n      this.apply();\n    }\n  }\n\n  private getFormattedDate(date: NgbDate) {\n    if (date) {\n      const locale = this.daterangeService.getCurrentLocale();\n      const dateFormat = getLocaleDateFormat(locale, FormatWidth.Short);\n      const formattedDate = formatDate(`${date.month}/${date.day}/${date.year}`, dateFormat, locale);\n\n      return formattedDate;\n    }\n  }\n\n  isHovered = (date: NgbDate) =>\n    this.fromDate && !this.toDate && this.hoveredDate && date.after(this.fromDate) && date.before(this.hoveredDate);\n\n  isInside = (date: NgbDate) => date.after(this.fromDate) && date.before(this.toDate);\n\n  isRange = (date: NgbDate) =>\n    date.equals(this.fromDate) || date.equals(this.toDate) || this.isInside(date) || this.isHovered(date);\n\n  showDatepicker() {\n    this.isDatepickerVisible = true;\n    this.presetSelect({ value: 'custom' });\n  }\n\n  onFilterChange(filter, index) {\n    this.selectedFilter = this.filters[index];\n  }\n\n  setPreset(value: number | null) {\n    this.presetSelected = value;\n    this.presetSelect({ value: this.presetSelected });\n    this.apply();\n  }\n\n  setFilter(index: number) {\n    if (this.filters !== undefined) {\n      this.selectedFilter = this.filters[index];\n    }\n  }\n\n  setDateRange(value) {\n    this.fromDate = new NgbDate(value.fromDate.year, value.fromDate.month, value.fromDate.day);\n    this.toDate = new NgbDate(value.toDate.year, value.toDate.month, value.toDate.day);\n    this.isDatepickerVisible = value.value === 'custom';\n    this.presetSelected = value.value;\n\n    if (this.filters) {\n      this.filterSelected = this.filters.findIndex(f => f.field === value.filter);\n      this.selectedFilter = this.filters[this.filterSelected];\n    }\n\n    this.apply();\n  }\n\n  private setInputLabel() {\n    if (this.presets) {\n      const selected = this.presets.find(p => p.value === this.presetSelected);\n\n      if (selected) {\n        if (this.fromDate === null || this.toDate === null) {\n          this.dateRange = selected.label;\n        } else if (this.presetSelected === null || (this.presetSelected !== null && this.presetSelected !== 'custom')) {\n          this.dateRange = selected.label;\n        } else {\n          this.dateRange = this.dateFormat();\n        }\n      } else if (this.presetSelected === 'custom' && this.fromDate && this.toDate) {\n        this.dateRange = this.dateFormat();\n      }\n    }\n  }\n\n  private dateFormat() {\n    return this.inputFormat\n      .replace('{fromDate}', this.getFormattedDate(this.fromDate))\n      .replace('{toDate}', this.getFormattedDate(this.toDate));\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { NgbDatepickerModule, NgbPopoverModule, NgbDropdownModule } from '@ng-bootstrap/ng-bootstrap';\n\nimport { MatRadioModule } from '@angular/material/radio';\n\nimport { PbdsDaterangePopoverComponent } from './daterange-popover.component';\n\n@NgModule({\n  declarations: [PbdsDaterangePopoverComponent],\n  imports: [CommonModule, FormsModule, MatRadioModule, NgbDatepickerModule, NgbPopoverModule, NgbDropdownModule],\n  exports: [PbdsDaterangePopoverComponent]\n})\nexport class PbdsDaterangePopoverModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n"],"names":[],"mappings":"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"}